"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[239],{695:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"react-native","title":"React Native Testing","description":"How to use sentry-testkit with React Native applications","source":"@site/docs/react-native.md","sourceDirName":".","slug":"/react-native","permalink":"/sentry-testkit/docs/react-native","draft":false,"unlisted":false,"editUrl":"https://github.com/zivl/sentry-testkit/blob/master/website/docs/docs/react-native.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"React Native Testing","description":"How to use sentry-testkit with React Native applications","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Version 6 Migration Guide","permalink":"/sentry-testkit/docs/migration/version-6"},"next":{"title":"Raven Testkit (Legacy API)","permalink":"/sentry-testkit/docs/raven-testkit-legacy"}}');var s=n(4848),i=n(8453);const a={title:"React Native Testing",description:"How to use sentry-testkit with React Native applications",sidebar_position:5},o="React Native Testing",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Setup",id:"setup",level:2},{value:"Example",id:"example",level:2},{value:"Expo Support",id:"expo-support",level:2},{value:"Common React Native Scenarios",id:"common-react-native-scenarios",level:2},{value:"Testing Native Crashes",id:"testing-native-crashes",level:3},{value:"Testing Navigation Errors",id:"testing-navigation-errors",level:3},{value:"Testing Network Errors",id:"testing-network-errors",level:3},{value:"Notes on React Native Environment",id:"notes-on-react-native-environment",level:2}];function p(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"react-native-testing",children:"React Native Testing"})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"Starting from version 6, sentry-testkit provides built-in support for testing React Native applications that use Sentry for error tracking and monitoring. This allows you to verify that your React Native app correctly reports errors and events to Sentry without actually sending them to Sentry's servers during testing."}),"\n",(0,s.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,s.jsx)(t.p,{children:"To use sentry-testkit with React Native, you need to follow these steps:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Install sentry-testkit in your React Native project:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm install --save-dev sentry-testkit\n# or\nyarn add --dev sentry-testkit\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"Import and initialize sentry-testkit in your tests:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"import * as ReactNativeSentry from '@sentry/react-native'\nimport sentryTestkit from 'sentry-testkit'\n\nconst { testkit, sentryTransport } = sentryTestkit()\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:"Initialize Sentry with the testkit transport:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"ReactNativeSentry.init({\n  dsn: 'https://your-dummy-dsn@sentry.io/123456',\n  release: 'test',\n  tracesSampleRate: 1,\n  transport: sentryTransport,\n  // other configurations\n})\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.p,{children:"Here's a complete example showing how to test a React Native application with sentry-testkit:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"import { Event, ErrorEvent } from '@sentry/core';\nimport * as ReactNativeSentry from '@sentry/react-native';\nimport sentryTestkit from 'sentry-testkit';\n\nconst { testkit, sentryTransport } = sentryTestkit();\nconst DUMMY_DSN = 'https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001';\nconst Sentry = ReactNativeSentry;\n\ndescribe('React Native Sentry integration tests', function() {\n  beforeAll(() =>\n    Sentry.init({\n      dsn: DUMMY_DSN,\n      release: 'test',\n      tracesSampleRate: 1,\n      transport: sentryTransport,\n      beforeSend(event: Event) {\n        event.extra = { os: 'mobile-device' };\n        return event as ErrorEvent;\n      },\n    })\n  );\n\n  beforeEach(() => testkit.reset());\n\n  test('should capture React Native exceptions', async () => {\n    Sentry.captureException(new Error('React Native test error'));\n\n    // Use a mechanism like waitForExpect to allow async operations to complete\n    expect(testkit.reports()).toHaveLength(1);\n\n    const report = testkit.reports()[0];\n    expect(report.error).toMatchObject({\n      name: 'Error',\n      message: 'React Native test error',\n    });\n  });\n\n  test('should include platform-specific information', async () => {\n    Sentry.captureException(new Error('Platform-specific error'));\n\n    expect(testkit.reports()).toHaveLength(1);\n    expect(testkit.reports()[0].extra).toEqual({ os: 'mobile-device' });\n  });\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"expo-support",children:"Expo Support"}),"\n",(0,s.jsx)(t.p,{children:"sentry-testkit works seamlessly with Expo-based React Native applications. The configuration is the same as regular React Native apps."}),"\n",(0,s.jsx)(t.h2,{id:"common-react-native-scenarios",children:"Common React Native Scenarios"}),"\n",(0,s.jsx)(t.h3,{id:"testing-native-crashes",children:"Testing Native Crashes"}),"\n",(0,s.jsx)(t.p,{children:"While JavaScript errors are captured automatically, native crashes (like those in native modules) require specific handling. Make sure you're properly configuring Sentry's native SDKs."}),"\n",(0,s.jsx)(t.h3,{id:"testing-navigation-errors",children:"Testing Navigation Errors"}),"\n",(0,s.jsx)(t.p,{children:"When testing navigation-related errors in React Native, ensure your navigation setup is properly mocked in the test environment."}),"\n",(0,s.jsx)(t.h3,{id:"testing-network-errors",children:"Testing Network Errors"}),"\n",(0,s.jsx)(t.p,{children:"For testing how your React Native app handles network errors with Sentry:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"test('should report network errors', async () => {\n  // Simulate a network error\n  const networkError = new Error('Network request failed')\n  networkError.name = 'NetworkError'\n\n  Sentry.captureException(networkError)\n\n  expect(testkit.reports()).toHaveLength(1)\n  expect(testkit.reports()[0].error.name).toBe('NetworkError')\n})\n"})}),"\n",(0,s.jsx)(t.h2,{id:"notes-on-react-native-environment",children:"Notes on React Native Environment"}),"\n",(0,s.jsx)(t.p,{children:"When testing React Native applications with sentry-testkit, keep in mind:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"React Native's environment differs from browser or Node.js environments"}),"\n",(0,s.jsx)(t.li,{children:"Some Sentry features may behave differently in React Native"}),"\n",(0,s.jsxs)(t.li,{children:["It's best to reset the testkit between tests using ",(0,s.jsx)(t.code,{children:"testkit.reset()"})]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["For more advanced React Native testing scenarios or platform-specific issues, refer to the ",(0,s.jsx)(t.a,{href:"https://docs.sentry.io/platforms/react-native/",children:"Sentry React Native documentation"}),"."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var r=n(6540);const s={},i=r.createContext(s);function a(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);